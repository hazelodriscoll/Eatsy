import{S as Qe,i as je,s as Oe,e as d,l as D,c as f,a as V,p as P,j as ee,d as m,q as l,b as ce,u as a,N as Fe,v as K,D as he,C as Ue,B as ue,L as Me,f as oe,o as He,I as Ae,w as ie,k as Le,t as ae,m as ne,x as Te,y as Ge,n as fe,E as ze,F as Ke,G as Je,H as We}from"./favourite.Z1-Hp_GV.js";import{s as Xe}from"./recipieService.DUCIO3jB.js";import{a as Ye}from"./store.B61S4mW1.js";import Ze from"./RecipieCard.CI3qP-kk.js";async function $e(r,e=0,n=null){const t={apiKey:"fb571eb0a36b417daee401017d390f99",query:r,addRecipeInstructions:!0,addRecipeNutrition:!0,number:"9",offset:e};n&&(t.diet=n);try{return await Xe(t)}catch(c){throw console.error("Failed to fetch search results:",c),new Error("Failed to fetch search results.")}}function Se(r,e,n){const t=r.slice();return t[28]=e[n],t}function Be(r){let e,n='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=d("div"),e.innerHTML=n,this.h()},l(t){e=f(t,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-xa3pz0"&&(e.innerHTML=n),this.h()},h(){l(e,"class","text-center my-4")},m(t,c){ce(t,e,c)},d(t){t&&m(e)}}}function et(r){let e,n,t,c,I,E,H,N,p,k,y,R=Math.ceil(r[6]/de)+"",S,w,T,Q,F,b,M,J,g=Le(r[5]),h=[];for(let s=0;s<g.length;s+=1)h[s]=qe(Se(r,g,s));const te=s=>he(h[s],1,1,()=>{h[s]=null});return{c(){e=d("div");for(let s=0;s<h.length;s+=1)h[s].c();n=D(),t=d("div"),c=d("button"),I=ae("Previous"),H=D(),N=d("span"),p=ae("Page "),k=ae(r[1]),y=ae(" of "),S=ae(R),w=D(),T=d("button"),Q=ae("Next"),this.h()},l(s){e=f(s,"DIV",{class:!0});var i=V(e);for(let G=0;G<h.length;G+=1)h[G].l(i);i.forEach(m),n=P(s),t=f(s,"DIV",{class:!0});var u=V(t);c=f(u,"BUTTON",{class:!0});var A=V(c);I=ne(A,"Previous"),A.forEach(m),H=P(u),N=f(u,"SPAN",{});var x=V(N);p=ne(x,"Page "),k=ne(x,r[1]),y=ne(x," of "),S=ne(x,R),x.forEach(m),w=P(u),T=f(u,"BUTTON",{class:!0});var le=V(T);Q=ne(le,"Next"),le.forEach(m),u.forEach(m),this.h()},h(){l(e,"class","card-group row row-cols-1 row-cols-md-3 g-4"),l(c,"class","btn btn-primary"),c.disabled=E=r[1]===1,l(T,"class","btn btn-primary"),T.disabled=F=r[1]===Math.ceil(r[6]/de),l(t,"class","pagination-controls d-flex justify-content-between align-items-center mt-4")},m(s,i){ce(s,e,i);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(e,null);ce(s,n,i),ce(s,t,i),a(t,c),a(c,I),a(t,H),a(t,N),a(N,p),a(N,k),a(N,y),a(N,S),a(t,w),a(t,T),a(T,Q),b=!0,M||(J=[K(c,"click",r[15]),K(T,"click",r[14])],M=!0)},p(s,i){if(i&32){g=Le(s[5]);let u;for(u=0;u<g.length;u+=1){const A=Se(s,g,u);h[u]?(h[u].p(A,i),ue(h[u],1)):(h[u]=qe(A),h[u].c(),ue(h[u],1),h[u].m(e,null))}for(Ae(),u=g.length;u<h.length;u+=1)te(u);Ue()}(!b||i&2&&E!==(E=s[1]===1))&&(c.disabled=E),(!b||i&2)&&Te(k,s[1]),(!b||i&64)&&R!==(R=Math.ceil(s[6]/de)+"")&&Te(S,R),(!b||i&66&&F!==(F=s[1]===Math.ceil(s[6]/de)))&&(T.disabled=F)},i(s){if(!b){for(let i=0;i<g.length;i+=1)ue(h[i]);b=!0}},o(s){h=h.filter(Boolean);for(let i=0;i<h.length;i+=1)he(h[i]);b=!1},d(s){s&&(m(e),m(n),m(t)),Ge(h,s),M=!1,Me(J)}}}function tt(r){let e,n="No recipes found. Try making a new search.";return{c(){e=d("div"),e.textContent=n,this.h()},l(t){e=f(t,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1k868mt"&&(e.textContent=n),this.h()},h(){l(e,"class","alert alert-warning text-center"),l(e,"role","alert")},m(t,c){ce(t,e,c)},p:fe,i:fe,o:fe,d(t){t&&m(e)}}}function lt(r){let e,n;return{c(){e=d("div"),n=ae(r[4]),this.h()},l(t){e=f(t,"DIV",{class:!0,role:!0});var c=V(e);n=ne(c,r[4]),c.forEach(m),this.h()},h(){l(e,"class","alert alert-danger"),l(e,"role","alert")},m(t,c){ce(t,e,c),a(e,n)},p(t,c){c&16&&Te(n,t[4])},i:fe,o:fe,d(t){t&&m(e)}}}function qe(r){let e,n;return e=new Ze({props:{recipie:r[28]}}),{c(){ze(e.$$.fragment)},l(t){Ke(e.$$.fragment,t)},m(t,c){Je(e,t,c),n=!0},p(t,c){const I={};c&32&&(I.recipie=t[28]),e.$set(I)},i(t){n||(ue(e.$$.fragment,t),n=!0)},o(t){he(e.$$.fragment,t),n=!1},d(t){We(e,t)}}}function rt(r){let e,n,t,c,I,E,H="Search",N,p,k,y,R,S,w,T="Vegetarian",Q,F,b,M,J,g,h="Pescetarian",te,s,i,u,A,x,le="Vegan",G,o,v,B,re,W,xe="Gluten Free",Ce,X,j,pe,Ie,Y,De="Dairy Free",Ee,ve,se,q,U,z,we,Pe,L=r[3]&&Be();const Ve=[lt,tt,et],Z=[];function Ne(_,C){return _[4]?0:_[5].length===0?1:2}return q=Ne(r),U=Z[q]=Ve[q](r),{c(){e=d("div"),n=d("form"),t=d("div"),c=d("input"),I=D(),E=d("button"),E.textContent=H,N=D(),p=d("div"),k=d("div"),y=d("input"),S=D(),w=d("label"),w.textContent=T,Q=D(),F=d("div"),b=d("input"),J=D(),g=d("label"),g.textContent=h,te=D(),s=d("div"),i=d("input"),A=D(),x=d("label"),x.textContent=le,G=D(),o=d("div"),v=d("input"),re=D(),W=d("label"),W.textContent=xe,Ce=D(),X=d("div"),j=d("input"),Ie=D(),Y=d("label"),Y.textContent=De,Ee=D(),L&&L.c(),ve=D(),se=d("div"),U.c(),this.h()},l(_){e=f(_,"DIV",{class:!0});var C=V(e);n=f(C,"FORM",{class:!0,id:!0});var $=V(n);t=f($,"DIV",{class:!0});var _e=V(t);c=f(_e,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),I=P(_e),E=f(_e,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ee(E)!=="svelte-1fsppor"&&(E.textContent=H),_e.forEach(m),N=P($),p=f($,"DIV",{id:!0,class:!0});var O=V(p);k=f(O,"DIV",{class:!0});var me=V(k);y=f(me,"INPUT",{class:!0,type:!0,id:!0}),S=P(me),w=f(me,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(w)!=="svelte-1x0trca"&&(w.textContent=T),me.forEach(m),Q=P(O),F=f(O,"DIV",{class:!0});var be=V(F);b=f(be,"INPUT",{class:!0,type:!0,id:!0}),J=P(be),g=f(be,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(g)!=="svelte-1aslwyo"&&(g.textContent=h),be.forEach(m),te=P(O),s=f(O,"DIV",{class:!0});var ge=V(s);i=f(ge,"INPUT",{class:!0,type:!0,id:!0}),A=P(ge),x=f(ge,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(x)!=="svelte-1lmcfn8"&&(x.textContent=le),ge.forEach(m),G=P(O),o=f(O,"DIV",{class:!0});var ke=V(o);v=f(ke,"INPUT",{class:!0,type:!0,id:!0}),re=P(ke),W=f(ke,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(W)!=="svelte-1uqssi8"&&(W.textContent=xe),ke.forEach(m),Ce=P(O),X=f(O,"DIV",{class:!0});var ye=V(X);j=f(ye,"INPUT",{class:!0,type:!0,id:!0}),Ie=P(ye),Y=f(ye,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(Y)!=="svelte-w0ymo"&&(Y.textContent=De),ye.forEach(m),O.forEach(m),$.forEach(m),Ee=P(C),L&&L.l(C),ve=P(C),se=f(C,"DIV",{class:!0});var Re=V(se);U.l(Re),Re.forEach(m),C.forEach(m),this.h()},h(){l(c,"class","form-control me-2"),l(c,"type","text"),l(c,"id","searchQuery"),l(c,"placeholder","Search recipes..."),l(E,"class","btn btn-primary"),l(E,"type","submit"),l(t,"class","d-flex mb-3 w-100"),l(y,"class","form-check-input"),l(y,"type","checkbox"),l(y,"id","vegetarianCheckbox"),y.value="vegetarian",y.checked=R=r[0].includes("vegetarian"),l(w,"class","form-check-label"),l(w,"for","vegetarianCheckbox"),l(k,"class","form-check form-check-inline"),l(b,"class","form-check-input"),l(b,"type","checkbox"),l(b,"id","pescetarianCheckbox"),b.value="pescetarian",b.checked=M=r[0].includes("pescetarian"),l(g,"class","form-check-label"),l(g,"for","pescetarianCheckbox"),l(F,"class","form-check form-check-inline"),l(i,"class","form-check-input"),l(i,"type","checkbox"),l(i,"id","veganCheckbox"),i.value="vegan",i.checked=u=r[0].includes("vegan"),l(x,"class","form-check-label"),l(x,"for","veganCheckbox"),l(s,"class","form-check form-check-inline"),l(v,"class","form-check-input"),l(v,"type","checkbox"),l(v,"id","glutenFreeCheckbox"),v.value="gluten free",v.checked=B=r[0].includes("gluten free"),l(W,"class","form-check-label"),l(W,"for","glutenFreeCheckbox"),l(o,"class","form-check form-check-inline"),l(j,"class","form-check-input"),l(j,"type","checkbox"),l(j,"id","dairyFreeCheckbox"),j.value="dairy free",j.checked=pe=r[0].includes("dairy free"),l(Y,"class","form-check-label"),l(Y,"for","dairyFreeCheckbox"),l(X,"class","form-check form-check-inline"),l(p,"id","dietFilter"),l(p,"class","d-flex flex-wrap justify-content-start"),l(n,"class","d-flex flex-column align-items-end"),l(n,"id","searchForm"),l(se,"class","container"),l(e,"class","container-fluid container-background")},m(_,C){ce(_,e,C),a(e,n),a(n,t),a(t,c),Fe(c,r[2]),a(t,I),a(t,E),a(n,N),a(n,p),a(p,k),a(k,y),a(k,S),a(k,w),a(p,Q),a(p,F),a(F,b),a(F,J),a(F,g),a(p,te),a(p,s),a(s,i),a(s,A),a(s,x),a(p,G),a(p,o),a(o,v),a(o,re),a(o,W),a(p,Ce),a(p,X),a(X,j),a(X,Ie),a(X,Y),a(e,Ee),L&&L.m(e,null),a(e,ve),a(e,se),Z[q].m(se,null),z=!0,we||(Pe=[K(c,"input",r[17]),K(y,"change",r[18]),K(b,"change",r[19]),K(i,"change",r[20]),K(v,"change",r[21]),K(j,"change",r[22]),K(n,"submit",r[13])],we=!0)},p(_,[C]){C&4&&c.value!==_[2]&&Fe(c,_[2]),(!z||C&1&&R!==(R=_[0].includes("vegetarian")))&&(y.checked=R),(!z||C&1&&M!==(M=_[0].includes("pescetarian")))&&(b.checked=M),(!z||C&1&&u!==(u=_[0].includes("vegan")))&&(i.checked=u),(!z||C&1&&B!==(B=_[0].includes("gluten free")))&&(v.checked=B),(!z||C&1&&pe!==(pe=_[0].includes("dairy free")))&&(j.checked=pe),_[3]?L||(L=Be(),L.c(),L.m(e,ve)):L&&(L.d(1),L=null);let $=q;q=Ne(_),q===$?Z[q].p(_,C):(Ae(),he(Z[$],1,1,()=>{Z[$]=null}),Ue(),U=Z[q],U?U.p(_,C):(U=Z[q]=Ve[q](_),U.c()),ue(U,1),U.m(se,null))},i(_){z||(ue(U),z=!0)},o(_){he(U),z=!1},d(_){_&&m(e),L&&L.d(),Z[q].d(),we=!1,Me(Pe)}}}const de=9;function st(r,e,n){let t,c,I,E,H,N,p=ie([]);oe(r,p,o=>n(5,H=o));let k=ie("");oe(r,k,o=>n(2,I=o));let y=!1,R=ie("");oe(r,R,o=>n(4,E=o));let S=ie(1);oe(r,S,o=>n(1,c=o));let w=ie(0);oe(r,w,o=>n(6,N=o));let T=ie([]);oe(r,T,o=>n(0,t=o));let Q;const F=b(M,1e3);function b(o,v){return function(...B){clearTimeout(Q),Q=setTimeout(()=>o.apply(this,B),v)}}He(async()=>{if(typeof window<"u"&&typeof sessionStorage<"u"){console.log("Running in the browser");const o=sessionStorage.getItem("searchQuery");console.log("Stored query:",o),o&&k.set(o)}});async function M(o,v,B){n(3,y=!0),R.set("");try{const re=await $e(o,v,B);p.set(re.results),w.set(re.totalResults)}catch{R.set("Failed to fetch search results."),p.set([])}finally{n(3,y=!1)}}function J(o){o.preventDefault();const v=o.target.querySelector("#searchQuery").value;if(v){Ye.set(v),sessionStorage.setItem("searchQuery",v);const B=t.join(",");M(v,0,B),S.set(1)}}const g=()=>{window.scrollTo({top:0,behavior:"smooth"})};function h(){S.update(o=>o+1),g()}function te(){S.update(o=>o>1?o-1:o),g()}function s(o){T.update(v=>v.includes(o)?v.filter(B=>B!==o):[...v,o])}function i(){I=this.value,k.set(I)}const u=()=>s("vegetarian"),A=()=>s("pescetarian"),x=()=>s("vegan"),le=()=>s("gluten free"),G=()=>s("dairy free");return r.$$.update=()=>{r.$$.dirty&7&&I&&F(I,(c-1)*de,t)},[t,c,I,y,E,H,N,p,k,R,S,w,T,J,h,te,s,i,u,A,x,le,G]}class it extends Qe{constructor(e){super(),je(this,e,st,rt,Oe,{})}}export{it as default};
