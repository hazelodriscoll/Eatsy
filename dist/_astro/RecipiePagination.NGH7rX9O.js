import{S as Te,i as Re,s as Le,k as se,e as v,t as q,l as R,c as k,a as I,m as G,d as m,p as L,j as ne,q as p,N as Ne,b as x,u as d,v as le,x as me,B as Y,C as Ie,D as X,y as ve,L as De,o as je,z as ke,I as Se,n as de,E as Ve,F as Be,G as Ue,H as Me}from"./favourite.B644HUm1.js";import Ke from"./RecipieCard.DfuvuYTw.js";import{g as Ae}from"./recipieService.DUCIO3jB.js";import"./store._WAF8Nku.js";const fe="selectedOption",oe=()=>{const l=sessionStorage.getItem(fe);return l?l.split(","):[]},Fe=l=>{const e=oe();e.includes(l)||(e.push(l),sessionStorage.setItem(fe,e.join(",")))},He=l=>{let e=oe();e=e.filter(t=>t!==l),sessionStorage.setItem(fe,e.join(","))};function ye(l,e,t){const s=l.slice();return s[17]=e[t],s}function Oe(l,e,t){const s=l.slice();return s[20]=e[t],s}function Pe(l){let e,t,s,i,r,c,h=l[9](l[20])+"",a,P,w,y;return{c(){e=v("li"),t=v("div"),s=v("input"),r=R(),c=v("label"),a=q(h),P=R(),this.h()},l(b){e=k(b,"LI",{class:!0});var S=I(e);t=k(S,"DIV",{class:!0});var N=I(t);s=k(N,"INPUT",{class:!0,type:!0,id:!0}),r=L(N),c=k(N,"LABEL",{class:!0,for:!0});var C=I(c);a=G(C,h),C.forEach(m),N.forEach(m),P=L(S),S.forEach(m),this.h()},h(){p(s,"class","form-check-input"),p(s,"type","checkbox"),s.value=l[20],p(s,"id",l[20]),s.checked=i=l[2].includes(l[20]),p(c,"class","form-check-label"),p(c,"for",l[20]),p(t,"class","form-check"),p(e,"class","mb-2")},m(b,S){x(b,e,S),d(e,t),d(t,s),d(t,r),d(t,c),d(c,a),d(e,P),w||(y=le(s,"change",l[10]),w=!0)},p(b,S){S&4&&i!==(i=b[2].includes(b[20]))&&(s.checked=i)},d(b){b&&m(e),w=!1,y()}}}function we(l){let e,t='<div class="spinner-border text-info" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(s){e=k(s,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1votrpu"&&(e.innerHTML=t),this.h()},h(){p(e,"class","text-center my-4")},m(s,i){x(s,e,i)},d(s){s&&m(e)}}}function ze(l){let e,t="Error: Invalid recipe data";return{c(){e=v("div"),e.textContent=t},l(s){e=k(s,"DIV",{"data-svelte-h":!0}),ne(e)!=="svelte-1i39b7z"&&(e.textContent=t)},m(s,i){x(s,e,i)},p:de,i:de,o:de,d(s){s&&m(e)}}}function Je(l){let e,t,s,i;return t=new Ke({props:{recipie:l[17]}}),{c(){e=v("div"),Ve(t.$$.fragment),s=R(),this.h()},l(r){e=k(r,"DIV",{class:!0});var c=I(e);Be(t.$$.fragment,c),s=L(c),c.forEach(m),this.h()},h(){p(e,"class","col-md-4")},m(r,c){x(r,e,c),Ue(t,e,null),d(e,s),i=!0},p(r,c){const h={};c&16&&(h.recipie=r[17]),t.$set(h)},i(r){i||(Y(t.$$.fragment,r),i=!0)},o(r){X(t.$$.fragment,r),i=!1},d(r){r&&m(e),Me(t)}}}function Ee(l){let e,t,s,i;const r=[Je,ze],c=[];function h(a,P){return a[17]&&a[17].title?0:1}return e=h(l),t=c[e]=r[e](l),{c(){t.c(),s=ke()},l(a){t.l(a),s=ke()},m(a,P){c[e].m(a,P),x(a,s,P),i=!0},p(a,P){let w=e;e=h(a),e===w?c[e].p(a,P):(Se(),X(c[w],1,1,()=>{c[w]=null}),Ie(),t=c[e],t?t.p(a,P):(t=c[e]=r[e](a),t.c()),Y(t,1),t.m(s.parentNode,s))},i(a){i||(Y(t),i=!0)},o(a){X(t),i=!1},d(a){a&&m(s),c[e].d(a)}}}function qe(l){let e,t,s,i=l[2].map(l[9]).join(", ")+"",r,c,h,a,P="Refresh Recipies",w,y,b,S="Add Options",N,C,Q,H,D,W,u,g,T,M,V,K,re,Z,ie,j,ae,$,B,ce,pe,z=se(l[11]),O=[];for(let n=0;n<z.length;n+=1)O[n]=Pe(Oe(l,z,n));let E=l[5]&&we(),A=se(l[4]),_=[];for(let n=0;n<A.length;n+=1)_[n]=Ee(ye(l,A,n));const Ce=n=>X(_[n],1,1,()=>{_[n]=null});return{c(){e=v("div"),t=v("div"),s=v("h4"),r=q(i),c=R(),h=v("div"),a=v("button"),a.textContent=P,w=R(),y=v("div"),b=v("button"),b.textContent=S,N=R(),C=v("ul");for(let n=0;n<O.length;n+=1)O[n].c();Q=R(),E&&E.c(),H=R(),D=v("div");for(let n=0;n<_.length;n+=1)_[n].c();W=R(),u=v("div"),g=v("button"),T=q("Previous"),V=R(),K=v("span"),re=q("Page "),Z=q(l[0]),ie=R(),j=v("button"),ae=q("Next"),this.h()},l(n){e=k(n,"DIV",{class:!0});var f=I(e);t=k(f,"DIV",{class:!0});var o=I(t);s=k(o,"H4",{class:!0,style:!0});var U=I(s);r=G(U,i),U.forEach(m),c=L(o),h=k(o,"DIV",{class:!0});var ee=I(h);a=k(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-1rjp7wp"&&(a.textContent=P),w=L(ee),y=k(ee,"DIV",{class:!0});var te=I(y);b=k(te,"BUTTON",{class:!0,type:!0,id:!0,"data-bs-toggle":!0,"aria-expanded":!0,"data-svelte-h":!0}),ne(b)!=="svelte-1x6p236"&&(b.textContent=S),N=L(te),C=k(te,"UL",{class:!0,"aria-labelledby":!0});var he=I(C);for(let F=0;F<O.length;F+=1)O[F].l(he);he.forEach(m),te.forEach(m),ee.forEach(m),o.forEach(m),Q=L(f),E&&E.l(f),H=L(f),D=k(f,"DIV",{class:!0});var _e=I(D);for(let F=0;F<_.length;F+=1)_[F].l(_e);_e.forEach(m),W=L(f),u=k(f,"DIV",{class:!0});var J=I(u);g=k(J,"BUTTON",{class:!0});var ge=I(g);T=G(ge,"Previous"),ge.forEach(m),V=L(J),K=k(J,"SPAN",{class:!0});var ue=I(K);re=G(ue,"Page "),Z=G(ue,l[0]),ue.forEach(m),ie=L(J),j=k(J,"BUTTON",{class:!0});var be=I(j);ae=G(be,"Next"),be.forEach(m),J.forEach(m),f.forEach(m),this.h()},h(){p(s,"class","bg-secondary text-white px-2 py-1 rounded"),Ne(s,"display","inline-block"),p(a,"class","btn btn-secondary me-2"),p(b,"class","btn btn-secondary dropdown-toggle"),p(b,"type","button"),p(b,"id","dropdownMenuButton"),p(b,"data-bs-toggle","dropdown"),p(b,"aria-expanded","false"),p(C,"class","dropdown-menu p-3"),p(C,"aria-labelledby","dropdownMenuButton"),p(y,"class","dropdown"),p(h,"class","button-container d-flex"),p(t,"class","title-button-container"),p(D,"class","card-group row row-cols-1 row-cols-md-3 g-4"),p(g,"class","btn btn-primary"),g.disabled=M=l[0]===1,p(K,"class","page-number"),p(j,"class","btn btn-primary"),j.disabled=$=l[0]===Math.ceil(l[3].recipes.length/l[1]),p(u,"class","pagination-controls d-flex justify-content-between align-items-center mt-4"),p(e,"class","container-fluid container-background")},m(n,f){x(n,e,f),d(e,t),d(t,s),d(s,r),d(t,c),d(t,h),d(h,a),d(h,w),d(h,y),d(y,b),d(y,N),d(y,C);for(let o=0;o<O.length;o+=1)O[o]&&O[o].m(C,null);d(e,Q),E&&E.m(e,null),d(e,H),d(e,D);for(let o=0;o<_.length;o+=1)_[o]&&_[o].m(D,null);d(e,W),d(e,u),d(u,g),d(g,T),d(u,V),d(u,K),d(K,re),d(K,Z),d(u,ie),d(u,j),d(j,ae),B=!0,ce||(pe=[le(a,"click",l[12]),le(g,"click",l[7]),le(j,"click",l[8])],ce=!0)},p(n,[f]){if((!B||f&4)&&i!==(i=n[2].map(n[9]).join(", ")+"")&&me(r,i),f&3588){z=se(n[11]);let o;for(o=0;o<z.length;o+=1){const U=Oe(n,z,o);O[o]?O[o].p(U,f):(O[o]=Pe(U),O[o].c(),O[o].m(C,null))}for(;o<O.length;o+=1)O[o].d(1);O.length=z.length}if(n[5]?E||(E=we(),E.c(),E.m(e,H)):E&&(E.d(1),E=null),f&16){A=se(n[4]);let o;for(o=0;o<A.length;o+=1){const U=ye(n,A,o);_[o]?(_[o].p(U,f),Y(_[o],1)):(_[o]=Ee(U),_[o].c(),Y(_[o],1),_[o].m(D,null))}for(Se(),o=A.length;o<_.length;o+=1)Ce(o);Ie()}(!B||f&1&&M!==(M=n[0]===1))&&(g.disabled=M),(!B||f&1)&&me(Z,n[0]),(!B||f&11&&$!==($=n[0]===Math.ceil(n[3].recipes.length/n[1])))&&(j.disabled=$)},i(n){if(!B){for(let f=0;f<A.length;f+=1)Y(_[f]);B=!0}},o(n){_=_.filter(Boolean);for(let f=0;f<_.length;f+=1)X(_[f]);B=!1},d(n){n&&m(e),ve(O,n),E&&E.d(),ve(_,n),ce=!1,De(pe)}}}function Ge(l,e,t){let{recipiesPerPage:s}=e,{currentPage:i}=e,r={recipes:[]},c=[],h=oe(),a=!1;const P=u=>{if(u){const g=new URL(window.location);g.searchParams.set("selectedOptions",u.join(",")),window.history.pushState({},"",g)}},w=u=>{if(!r||!r.recipes)return[];const g=(u-1)*s,T=g+s;return r.recipes.slice(g,T)},y=async(u=!1)=>{t(5,a=!0);try{const T=`allRecipies_${h.slice().sort().join("_")}`;console.log("Storage Key:",T);const M=sessionStorage.getItem(T);if(M&&!u)t(3,r=JSON.parse(M)),console.log("Loaded recipes from session storage: ",r);else{const V={apiKey:"fb571eb0a36b417daee401017d390f99","include-tags":h.length>0?h:null,number:"27",includeInstructions:!0};(V["include-tags"]===null||V["include-tags"].length===0)&&delete V["include-tags"],t(3,r=await Ae(V)),console.log("Fetched new recipes: ",r),sessionStorage.setItem(T,JSON.stringify(r))}t(4,c=w(i))}catch(g){console.error("Failed to fetch recipes:",g),t(3,r={recipes:[]})}finally{t(5,a=!1)}},b=()=>{window.scrollTo({top:0,behavior:"smooth"})},S=u=>{t(4,c=w(u)),t(0,i=u),b()},N=()=>{i>1&&S(i-1)},C=()=>{i<Math.ceil(r.recipes.length/s)&&S(i+1)},Q=u=>u.charAt(0).toUpperCase()+u.slice(1),H=u=>{const g=u.target.value;u.target.checked?Fe(g):He(g),t(2,h=oe())},D=["vegetarian","vegan","pescatarian","gluten free","dairy free","breakfast","lunch","dinner","dessert","drinks"];je(()=>{y()});const W=()=>y(!0);return l.$$set=u=>{"recipiesPerPage"in u&&t(1,s=u.recipiesPerPage),"currentPage"in u&&t(0,i=u.currentPage)},l.$$.update=()=>{if(l.$$.dirty&5)if(h.length>0){const g=`allRecipies_${h.slice().sort().join("_")}`,T=sessionStorage.getItem(g);T?(t(3,r=JSON.parse(T)),t(4,c=w(i))):y(!0)}else y(!0);l.$$.dirty&4&&P(h)},[i,s,h,r,c,a,y,N,C,Q,H,D,W]}class Xe extends Te{constructor(e){super(),Re(this,e,Ge,qe,Le,{recipiesPerPage:1,currentPage:0})}}export{Xe as default};
