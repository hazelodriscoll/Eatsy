import{n as r,s as p}from"./index.G0FiUpWy.js";function l(s){return s?.length!==void 0?s:Array.from(s)}const t=[];function g(s,b=r){let i;const u=new Set;function f(e){if(p(s,e)&&(s=e,i)){const o=!t.length;for(const n of u)n[1](),t.push(n,s);if(o){for(let n=0;n<t.length;n+=2)t[n][0](t[n+1]);t.length=0}}}function c(e){f(e(s))}function d(e,o=r){const n=[e,o];return u.add(n),u.size===1&&(i=b(f,c)||r),e(s),()=>{u.delete(n),u.size===0&&i&&(i(),i=null)}}return{set:f,update:c,subscribe:d}}export{l as e,g as w};
