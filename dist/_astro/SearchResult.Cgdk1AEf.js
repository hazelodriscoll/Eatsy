import{S as Qe,i as je,s as Oe,e as d,m as x,c as f,a as V,q as P,j as ee,d as m,k as l,b as ce,v as a,L as Fe,x as J,E as he,D as Me,C as ue,M as Ue,f as oe,o as He,J as Ae,w as ie,l as Le,t as ae,p as ne,y as Te,z as ze,n as fe,F as Ge,G as Je,H as Ke,I as We}from"./favourite.CYmlvXJL.js";import{s as Xe}from"./recipeService.DUCIO3jB.js";import{s as Ye}from"./store.CuRCmC5Y.js";import Ze from"./RecipeCard.CEMaTlkX.js";async function $e(r,e=0,n=null){const t={apiKey:"fb571eb0a36b417daee401017d390f99",query:r,addRecipeInstructions:!0,addRecipeNutrition:!0,number:"9",offset:e};n&&(t.diet=n);try{return await Xe(t)}catch(c){throw console.error("Failed to fetch search results:",c),new Error("Failed to fetch search results.")}}function Se(r,e,n){const t=r.slice();return t[28]=e[n],t}function qe(r){let e,n='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=d("div"),e.innerHTML=n,this.h()},l(t){e=f(t,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-xa3pz0"&&(e.innerHTML=n),this.h()},h(){l(e,"class","text-center my-4")},m(t,c){ce(t,e,c)},d(t){t&&m(e)}}}function et(r){let e,n,t,c,I,E,H,N,p,k,y,R=Math.ceil(r[6]/de)+"",S,w,T,Q,F,b,U,K,g=Le(r[5]),h=[];for(let s=0;s<g.length;s+=1)h[s]=Be(Se(r,g,s));const te=s=>he(h[s],1,1,()=>{h[s]=null});return{c(){e=d("div");for(let s=0;s<h.length;s+=1)h[s].c();n=x(),t=d("div"),c=d("button"),I=ae("Previous"),H=x(),N=d("span"),p=ae("Page "),k=ae(r[1]),y=ae(" of "),S=ae(R),w=x(),T=d("button"),Q=ae("Next"),this.h()},l(s){e=f(s,"DIV",{class:!0});var i=V(e);for(let z=0;z<h.length;z+=1)h[z].l(i);i.forEach(m),n=P(s),t=f(s,"DIV",{class:!0});var u=V(t);c=f(u,"BUTTON",{class:!0});var A=V(c);I=ne(A,"Previous"),A.forEach(m),H=P(u),N=f(u,"SPAN",{});var D=V(N);p=ne(D,"Page "),k=ne(D,r[1]),y=ne(D," of "),S=ne(D,R),D.forEach(m),w=P(u),T=f(u,"BUTTON",{class:!0});var le=V(T);Q=ne(le,"Next"),le.forEach(m),u.forEach(m),this.h()},h(){l(e,"class","card-group row row-cols-1 row-cols-md-3 g-4"),l(c,"class","btn btn-primary"),c.disabled=E=r[1]===1,l(T,"class","btn btn-primary"),T.disabled=F=r[1]===Math.ceil(r[6]/de),l(t,"class","pagination-controls d-flex justify-content-between align-items-center mt-4")},m(s,i){ce(s,e,i);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(e,null);ce(s,n,i),ce(s,t,i),a(t,c),a(c,I),a(t,H),a(t,N),a(N,p),a(N,k),a(N,y),a(N,S),a(t,w),a(t,T),a(T,Q),b=!0,U||(K=[J(c,"click",r[15]),J(T,"click",r[14])],U=!0)},p(s,i){if(i&32){g=Le(s[5]);let u;for(u=0;u<g.length;u+=1){const A=Se(s,g,u);h[u]?(h[u].p(A,i),ue(h[u],1)):(h[u]=Be(A),h[u].c(),ue(h[u],1),h[u].m(e,null))}for(Ae(),u=g.length;u<h.length;u+=1)te(u);Me()}(!b||i&2&&E!==(E=s[1]===1))&&(c.disabled=E),(!b||i&2)&&Te(k,s[1]),(!b||i&64)&&R!==(R=Math.ceil(s[6]/de)+"")&&Te(S,R),(!b||i&66&&F!==(F=s[1]===Math.ceil(s[6]/de)))&&(T.disabled=F)},i(s){if(!b){for(let i=0;i<g.length;i+=1)ue(h[i]);b=!0}},o(s){h=h.filter(Boolean);for(let i=0;i<h.length;i+=1)he(h[i]);b=!1},d(s){s&&(m(e),m(n),m(t)),ze(h,s),U=!1,Ue(K)}}}function tt(r){let e,n="No recipes found. Try making a new search.";return{c(){e=d("div"),e.textContent=n,this.h()},l(t){e=f(t,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1k868mt"&&(e.textContent=n),this.h()},h(){l(e,"class","alert alert-warning text-center"),l(e,"role","alert")},m(t,c){ce(t,e,c)},p:fe,i:fe,o:fe,d(t){t&&m(e)}}}function lt(r){let e,n;return{c(){e=d("div"),n=ae(r[4]),this.h()},l(t){e=f(t,"DIV",{class:!0,role:!0});var c=V(e);n=ne(c,r[4]),c.forEach(m),this.h()},h(){l(e,"class","alert alert-danger"),l(e,"role","alert")},m(t,c){ce(t,e,c),a(e,n)},p(t,c){c&16&&Te(n,t[4])},i:fe,o:fe,d(t){t&&m(e)}}}function Be(r){let e,n;return e=new Ze({props:{recipe:r[28]}}),{c(){Ge(e.$$.fragment)},l(t){Je(e.$$.fragment,t)},m(t,c){Ke(e,t,c),n=!0},p(t,c){const I={};c&32&&(I.recipe=t[28]),e.$set(I)},i(t){n||(ue(e.$$.fragment,t),n=!0)},o(t){he(e.$$.fragment,t),n=!1},d(t){We(e,t)}}}function rt(r){let e,n,t,c,I,E,H="Search",N,p,k,y,R,S,w,T="Vegetarian",Q,F,b,U,K,g,h="Pescetarian",te,s,i,u,A,D,le="Vegan",z,o,_,q,re,W,De="Gluten Free",Ce,X,j,pe,Ie,Y,xe="Dairy Free",Ee,ve,se,B,M,G,we,Pe,L=r[3]&&qe();const Ve=[lt,tt,et],Z=[];function Ne(v,C){return v[4]?0:v[5].length===0&&!v[3]?1:2}return B=Ne(r),M=Z[B]=Ve[B](r),{c(){e=d("div"),n=d("form"),t=d("div"),c=d("input"),I=x(),E=d("button"),E.textContent=H,N=x(),p=d("div"),k=d("div"),y=d("input"),S=x(),w=d("label"),w.textContent=T,Q=x(),F=d("div"),b=d("input"),K=x(),g=d("label"),g.textContent=h,te=x(),s=d("div"),i=d("input"),A=x(),D=d("label"),D.textContent=le,z=x(),o=d("div"),_=d("input"),re=x(),W=d("label"),W.textContent=De,Ce=x(),X=d("div"),j=d("input"),Ie=x(),Y=d("label"),Y.textContent=xe,Ee=x(),L&&L.c(),ve=x(),se=d("div"),M.c(),this.h()},l(v){e=f(v,"DIV",{class:!0});var C=V(e);n=f(C,"FORM",{class:!0,id:!0});var $=V(n);t=f($,"DIV",{class:!0});var _e=V(t);c=f(_e,"INPUT",{class:!0,type:!0,id:!0,placeholder:!0}),I=P(_e),E=f(_e,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ee(E)!=="svelte-1fsppor"&&(E.textContent=H),_e.forEach(m),N=P($),p=f($,"DIV",{id:!0,class:!0});var O=V(p);k=f(O,"DIV",{class:!0});var me=V(k);y=f(me,"INPUT",{class:!0,type:!0,id:!0}),S=P(me),w=f(me,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(w)!=="svelte-1x0trca"&&(w.textContent=T),me.forEach(m),Q=P(O),F=f(O,"DIV",{class:!0});var be=V(F);b=f(be,"INPUT",{class:!0,type:!0,id:!0}),K=P(be),g=f(be,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(g)!=="svelte-1aslwyo"&&(g.textContent=h),be.forEach(m),te=P(O),s=f(O,"DIV",{class:!0});var ge=V(s);i=f(ge,"INPUT",{class:!0,type:!0,id:!0}),A=P(ge),D=f(ge,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(D)!=="svelte-1lmcfn8"&&(D.textContent=le),ge.forEach(m),z=P(O),o=f(O,"DIV",{class:!0});var ke=V(o);_=f(ke,"INPUT",{class:!0,type:!0,id:!0}),re=P(ke),W=f(ke,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(W)!=="svelte-1uqssi8"&&(W.textContent=De),ke.forEach(m),Ce=P(O),X=f(O,"DIV",{class:!0});var ye=V(X);j=f(ye,"INPUT",{class:!0,type:!0,id:!0}),Ie=P(ye),Y=f(ye,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ee(Y)!=="svelte-w0ymo"&&(Y.textContent=xe),ye.forEach(m),O.forEach(m),$.forEach(m),Ee=P(C),L&&L.l(C),ve=P(C),se=f(C,"DIV",{class:!0});var Re=V(se);M.l(Re),Re.forEach(m),C.forEach(m),this.h()},h(){l(c,"class","form-control me-2"),l(c,"type","text"),l(c,"id","searchQuery"),l(c,"placeholder","Search recipes..."),l(E,"class","btn btn-primary"),l(E,"type","submit"),l(t,"class","d-flex mb-3 w-100"),l(y,"class","form-check-input"),l(y,"type","checkbox"),l(y,"id","vegetarianCheckbox"),y.value="vegetarian",y.checked=R=r[0].includes("vegetarian"),l(w,"class","form-check-label"),l(w,"for","vegetarianCheckbox"),l(k,"class","form-check form-check-inline"),l(b,"class","form-check-input"),l(b,"type","checkbox"),l(b,"id","pescetarianCheckbox"),b.value="pescetarian",b.checked=U=r[0].includes("pescetarian"),l(g,"class","form-check-label"),l(g,"for","pescetarianCheckbox"),l(F,"class","form-check form-check-inline"),l(i,"class","form-check-input"),l(i,"type","checkbox"),l(i,"id","veganCheckbox"),i.value="vegan",i.checked=u=r[0].includes("vegan"),l(D,"class","form-check-label"),l(D,"for","veganCheckbox"),l(s,"class","form-check form-check-inline"),l(_,"class","form-check-input"),l(_,"type","checkbox"),l(_,"id","glutenFreeCheckbox"),_.value="gluten free",_.checked=q=r[0].includes("gluten free"),l(W,"class","form-check-label"),l(W,"for","glutenFreeCheckbox"),l(o,"class","form-check form-check-inline"),l(j,"class","form-check-input"),l(j,"type","checkbox"),l(j,"id","dairyFreeCheckbox"),j.value="dairy free",j.checked=pe=r[0].includes("dairy free"),l(Y,"class","form-check-label"),l(Y,"for","dairyFreeCheckbox"),l(X,"class","form-check form-check-inline"),l(p,"id","dietFilter"),l(p,"class","d-flex flex-wrap justify-content-start"),l(n,"class","d-flex flex-column align-items-end"),l(n,"id","searchForm"),l(se,"class","container"),l(e,"class","container-fluid container-background")},m(v,C){ce(v,e,C),a(e,n),a(n,t),a(t,c),Fe(c,r[2]),a(t,I),a(t,E),a(n,N),a(n,p),a(p,k),a(k,y),a(k,S),a(k,w),a(p,Q),a(p,F),a(F,b),a(F,K),a(F,g),a(p,te),a(p,s),a(s,i),a(s,A),a(s,D),a(p,z),a(p,o),a(o,_),a(o,re),a(o,W),a(p,Ce),a(p,X),a(X,j),a(X,Ie),a(X,Y),a(e,Ee),L&&L.m(e,null),a(e,ve),a(e,se),Z[B].m(se,null),G=!0,we||(Pe=[J(c,"input",r[17]),J(y,"change",r[18]),J(b,"change",r[19]),J(i,"change",r[20]),J(_,"change",r[21]),J(j,"change",r[22]),J(n,"submit",r[13])],we=!0)},p(v,[C]){C&4&&c.value!==v[2]&&Fe(c,v[2]),(!G||C&1&&R!==(R=v[0].includes("vegetarian")))&&(y.checked=R),(!G||C&1&&U!==(U=v[0].includes("pescetarian")))&&(b.checked=U),(!G||C&1&&u!==(u=v[0].includes("vegan")))&&(i.checked=u),(!G||C&1&&q!==(q=v[0].includes("gluten free")))&&(_.checked=q),(!G||C&1&&pe!==(pe=v[0].includes("dairy free")))&&(j.checked=pe),v[3]?L||(L=qe(),L.c(),L.m(e,ve)):L&&(L.d(1),L=null);let $=B;B=Ne(v),B===$?Z[B].p(v,C):(Ae(),he(Z[$],1,1,()=>{Z[$]=null}),Me(),M=Z[B],M?M.p(v,C):(M=Z[B]=Ve[B](v),M.c()),ue(M,1),M.m(se,null))},i(v){G||(ue(M),G=!0)},o(v){he(M),G=!1},d(v){v&&m(e),L&&L.d(),Z[B].d(),we=!1,Ue(Pe)}}}const de=9;function st(r,e,n){let t,c,I,E,H,N,p=ie([]);oe(r,p,o=>n(5,H=o));let k=ie("");oe(r,k,o=>n(2,I=o));let y=!1,R=ie("");oe(r,R,o=>n(4,E=o));let S=ie(1);oe(r,S,o=>n(1,c=o));let w=ie(0);oe(r,w,o=>n(6,N=o));let T=ie([]);oe(r,T,o=>n(0,t=o));let Q;const F=b(U,1e3);function b(o,_){return function(...q){clearTimeout(Q),Q=setTimeout(()=>o.apply(this,q),_)}}He(async()=>{if(typeof window<"u"&&typeof sessionStorage<"u"){console.log("Running in the browser");const o=sessionStorage.getItem("searchQuery");console.log("Stored query:",o),o&&k.set(o)}});async function U(o,_,q){n(3,y=!0),R.set("");try{const re=await $e(o,_,q);p.set(re.results),w.set(re.totalResults)}catch{R.set("Failed to fetch search results."),p.set([])}finally{n(3,y=!1)}}function K(o){o.preventDefault();const _=o.target.querySelector("#searchQuery").value;if(_){Ye.set(_),sessionStorage.setItem("searchQuery",_);const q=t.join(",");U(_,0,q),S.set(1)}}const g=()=>{window.scrollTo({top:0,behavior:"smooth"})};function h(){S.update(o=>o+1),g()}function te(){S.update(o=>o>1?o-1:o),g()}function s(o){T.update(_=>_.includes(o)?_.filter(q=>q!==o):[..._,o])}function i(){I=this.value,k.set(I)}const u=()=>s("vegetarian"),A=()=>s("pescetarian"),D=()=>s("vegan"),le=()=>s("gluten free"),z=()=>s("dairy free");return r.$$.update=()=>{r.$$.dirty&7&&I&&F(I,(c-1)*de,t)},[t,c,I,y,E,H,N,p,k,R,S,w,T,K,h,te,s,i,u,A,D,le,z]}class it extends Qe{constructor(e){super(),je(this,e,st,rt,Oe,{})}}export{it as default};
