import{S as Oe,i as Ce,s as Se,k as $,e as v,t as K,l as N,c as k,a as E,m as q,d as b,p as T,j as ce,q as p,N as Re,b as Y,u,v as ee,x as ge,B as z,C as we,D as G,y as me,L as Ne,o as Te,z as be,I as Ee,n as ie,E as Le,F as De,G as Ue,H as je}from"./favourite.B644HUm1.js";import Be from"./RecipieCard.DfuvuYTw.js";import{g as Ve}from"./recipieService.DUCIO3jB.js";import"./store._WAF8Nku.js";const ue="selectedOption",te=()=>{const s=sessionStorage.getItem(ue);return s?s.split(","):[]},Me=s=>{const e=te();e.includes(s)||(e.push(s),sessionStorage.setItem(ue,e.join(",")))},Fe=s=>{let e=te();e=e.filter(t=>t!==s),sessionStorage.setItem(ue,e.join(","))};function ve(s,e,t){const l=s.slice();return l[15]=e[t],l}function ke(s,e,t){const l=s.slice();return l[18]=e[t],l}function Pe(s){let e,t,l,c,r,o,f=s[8](s[18])+"",i,w,P,I;return{c(){e=v("li"),t=v("div"),l=v("input"),r=N(),o=v("label"),i=K(f),w=N(),this.h()},l(m){e=k(m,"LI",{class:!0});var S=E(e);t=k(S,"DIV",{class:!0});var R=E(t);l=k(R,"INPUT",{class:!0,type:!0,id:!0}),r=T(R),o=k(R,"LABEL",{class:!0,for:!0});var C=E(o);i=q(C,f),C.forEach(b),R.forEach(b),w=T(S),S.forEach(b),this.h()},h(){p(l,"class","form-check-input"),p(l,"type","checkbox"),l.value=s[18],p(l,"id",s[18]),l.checked=c=s[2].includes(s[18]),p(o,"class","form-check-label"),p(o,"for",s[18]),p(t,"class","form-check"),p(e,"class","mb-2")},m(m,S){Y(m,e,S),u(e,t),u(t,l),u(t,r),u(t,o),u(o,i),u(e,w),P||(I=ee(l,"change",s[9]),P=!0)},p(m,S){S&4&&c!==(c=m[2].includes(m[18]))&&(l.checked=c)},d(m){m&&b(e),P=!1,I()}}}function Ae(s){let e,t="Error: Invalid recipie data";return{c(){e=v("div"),e.textContent=t},l(l){e=k(l,"DIV",{"data-svelte-h":!0}),ce(e)!=="svelte-p2pwgg"&&(e.textContent=t)},m(l,c){Y(l,e,c)},p:ie,i:ie,o:ie,d(l){l&&b(e)}}}function Ke(s){let e,t,l,c;return t=new Be({props:{recipie:s[15]}}),{c(){e=v("div"),Le(t.$$.fragment),l=N(),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=E(e);De(t.$$.fragment,o),l=T(o),o.forEach(b),this.h()},h(){p(e,"class","col-md-4")},m(r,o){Y(r,e,o),Ue(t,e,null),u(e,l),c=!0},p(r,o){const f={};o&16&&(f.recipie=r[15]),t.$set(f)},i(r){c||(z(t.$$.fragment,r),c=!0)},o(r){G(t.$$.fragment,r),c=!1},d(r){r&&b(e),je(t)}}}function ye(s){let e,t,l,c;const r=[Ke,Ae],o=[];function f(i,w){return i[15]&&i[15].title?0:1}return e=f(s),t=o[e]=r[e](s),{c(){t.c(),l=be()},l(i){t.l(i),l=be()},m(i,w){o[e].m(i,w),Y(i,l,w),c=!0},p(i,w){let P=e;e=f(i),e===P?o[e].p(i,w):(Ee(),G(o[P],1,1,()=>{o[P]=null}),we(),t=o[e],t?t.p(i,w):(t=o[e]=r[e](i),t.c()),z(t,1),t.m(l.parentNode,l))},i(i){c||(z(t),c=!0)},o(i){G(t),c=!1},d(i){i&&b(l),o[e].d(i)}}}function qe(s){let e,t,l,c=s[2].map(s[8]).join(", ")+"",r,o,f,i,w="Refresh Recipies",P,I,m,S="Add Options",R,C,H,L,h,d,O,Q,J,se,B,le,W,ne,D,ae,X,U,re,de,F=$(s[10]),y=[];for(let a=0;a<F.length;a+=1)y[a]=Pe(ke(s,F,a));let V=$(s[4]),g=[];for(let a=0;a<V.length;a+=1)g[a]=ye(ve(s,V,a));const Ie=a=>G(g[a],1,1,()=>{g[a]=null});return{c(){e=v("div"),t=v("div"),l=v("h4"),r=K(c),o=N(),f=v("div"),i=v("button"),i.textContent=w,P=N(),I=v("div"),m=v("button"),m.textContent=S,R=N(),C=v("ul");for(let a=0;a<y.length;a+=1)y[a].c();H=N(),L=v("div");for(let a=0;a<g.length;a+=1)g[a].c();h=N(),d=v("div"),O=v("button"),Q=K("Previous"),se=N(),B=v("span"),le=K("Page "),W=K(s[0]),ne=N(),D=v("button"),ae=K("Next"),this.h()},l(a){e=k(a,"DIV",{class:!0});var _=E(e);t=k(_,"DIV",{class:!0});var n=E(t);l=k(n,"H4",{class:!0,style:!0});var j=E(l);r=q(j,c),j.forEach(b),o=T(n),f=k(n,"DIV",{class:!0});var Z=E(f);i=k(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(i)!=="svelte-1rjp7wp"&&(i.textContent=w),P=T(Z),I=k(Z,"DIV",{class:!0});var x=E(I);m=k(x,"BUTTON",{class:!0,type:!0,id:!0,"data-bs-toggle":!0,"aria-expanded":!0,"data-svelte-h":!0}),ce(m)!=="svelte-1x6p236"&&(m.textContent=S),R=T(x),C=k(x,"UL",{class:!0,"aria-labelledby":!0});var pe=E(C);for(let M=0;M<y.length;M+=1)y[M].l(pe);pe.forEach(b),x.forEach(b),Z.forEach(b),n.forEach(b),H=T(_),L=k(_,"DIV",{class:!0});var fe=E(L);for(let M=0;M<g.length;M+=1)g[M].l(fe);fe.forEach(b),h=T(_),d=k(_,"DIV",{class:!0});var A=E(d);O=k(A,"BUTTON",{class:!0});var he=E(O);Q=q(he,"Previous"),he.forEach(b),se=T(A),B=k(A,"SPAN",{class:!0});var oe=E(B);le=q(oe,"Page "),W=q(oe,s[0]),oe.forEach(b),ne=T(A),D=k(A,"BUTTON",{class:!0});var _e=E(D);ae=q(_e,"Next"),_e.forEach(b),A.forEach(b),_.forEach(b),this.h()},h(){p(l,"class","bg-secondary text-white px-2 py-1 rounded"),Re(l,"display","inline-block"),p(i,"class","btn btn-secondary me-2"),p(m,"class","btn btn-secondary dropdown-toggle"),p(m,"type","button"),p(m,"id","dropdownMenuButton"),p(m,"data-bs-toggle","dropdown"),p(m,"aria-expanded","false"),p(C,"class","dropdown-menu p-3"),p(C,"aria-labelledby","dropdownMenuButton"),p(I,"class","dropdown"),p(f,"class","button-container d-flex"),p(t,"class","title-button-container"),p(L,"class","card-group row row-cols-1 row-cols-md-3 g-4"),p(O,"class","btn btn-primary"),O.disabled=J=s[0]===1,p(B,"class","page-number"),p(D,"class","btn btn-primary"),D.disabled=X=s[0]===Math.ceil(s[3].recipes.length/s[1]),p(d,"class","pagination-controls d-flex justify-content-between align-items-center mt-4"),p(e,"class","container-fluid container-background")},m(a,_){Y(a,e,_),u(e,t),u(t,l),u(l,r),u(t,o),u(t,f),u(f,i),u(f,P),u(f,I),u(I,m),u(I,R),u(I,C);for(let n=0;n<y.length;n+=1)y[n]&&y[n].m(C,null);u(e,H),u(e,L);for(let n=0;n<g.length;n+=1)g[n]&&g[n].m(L,null);u(e,h),u(e,d),u(d,O),u(O,Q),u(d,se),u(d,B),u(B,le),u(B,W),u(d,ne),u(d,D),u(D,ae),U=!0,re||(de=[ee(i,"click",s[11]),ee(O,"click",s[6]),ee(D,"click",s[7])],re=!0)},p(a,[_]){if((!U||_&4)&&c!==(c=a[2].map(a[8]).join(", ")+"")&&ge(r,c),_&1796){F=$(a[10]);let n;for(n=0;n<F.length;n+=1){const j=ke(a,F,n);y[n]?y[n].p(j,_):(y[n]=Pe(j),y[n].c(),y[n].m(C,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=F.length}if(_&16){V=$(a[4]);let n;for(n=0;n<V.length;n+=1){const j=ve(a,V,n);g[n]?(g[n].p(j,_),z(g[n],1)):(g[n]=ye(j),g[n].c(),z(g[n],1),g[n].m(L,null))}for(Ee(),n=V.length;n<g.length;n+=1)Ie(n);we()}(!U||_&1&&J!==(J=a[0]===1))&&(O.disabled=J),(!U||_&1)&&ge(W,a[0]),(!U||_&11&&X!==(X=a[0]===Math.ceil(a[3].recipes.length/a[1])))&&(D.disabled=X)},i(a){if(!U){for(let _=0;_<V.length;_+=1)z(g[_]);U=!0}},o(a){g=g.filter(Boolean);for(let _=0;_<g.length;_+=1)G(g[_]);U=!1},d(a){a&&b(e),me(y,a),me(g,a),re=!1,Ne(de)}}}function ze(s,e,t){let{recipiesPerPage:l}=e,{currentPage:c}=e,r={recipes:[]},o=[],f=te();console.log(f);const i=h=>{if(h){const d=new URL(window.location);d.searchParams.set("selectedOptions",h.join(",")),window.history.pushState({},"",d)}};Te(()=>{const d=new URLSearchParams(window.location.search).get("selectedOptions");d&&t(2,f=d.split(",")),P()});const w=h=>{if(!r||!r.recipes)return[];const d=(h-1)*l,O=d+l;return r.recipes.slice(d,O)},P=async(h=!1)=>{try{const d=`allRecipies_${f.join("_")}`,O=sessionStorage.getItem(d);O&&!h?(t(3,r=JSON.parse(O)),console.log("Loaded recipes from local storage: ",r)):(t(3,r=await Ve({apiKey:"fb571eb0a36b417daee401017d390f99","include-tags":f,number:"27",includeInstructions:!0})),console.log("Fetched new recipes: ",r),sessionStorage.setItem(d,JSON.stringify(r))),t(4,o=w(c))}catch(d){console.error("Failed to fetch recipes:",d),t(3,r={recipes:[]})}},I=h=>{t(4,o=w(h)),t(0,c=h)},m=()=>{c>1&&I(c-1)},S=()=>{c<Math.ceil(r.recipes.length/l)&&I(c+1)},R=h=>h.charAt(0).toUpperCase()+h.slice(1),C=h=>{const d=h.target.value;h.target.checked?Me(d):Fe(d),t(2,f=te()),P(!0)},H=["vegetarian","vegan","pescatarian","gluten free","dairy free","breakfast","lunch","dinner","dessert","drinks"],L=()=>P(!0);return s.$$set=h=>{"recipiesPerPage"in h&&t(1,l=h.recipiesPerPage),"currentPage"in h&&t(0,c=h.currentPage)},s.$$.update=()=>{s.$$.dirty&4&&i(f)},P(!0),[c,l,f,r,o,P,m,S,R,C,H,L]}class Qe extends Oe{constructor(e){super(),Ce(this,e,ze,qe,Se,{recipiesPerPage:1,currentPage:0})}}export{Qe as default};
