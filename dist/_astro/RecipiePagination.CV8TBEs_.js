import{S as Oe,i as Ce,s as Se,k as $,e as v,t as K,l as T,c as k,a as E,m as q,d as b,p as L,j as ce,q as _,b as Y,u,v as ee,x as ge,B as z,C as ye,D as G,y as me,L as Re,o as Te,z as be,I as Ee,n as ie,E as Le,F as Ne,G as De,H as Ue}from"./favourite.SmmztaO5.js";import je from"./RecipieCard.Bg6qcsTr.js";import{g as Be}from"./recipieService.DUCIO3jB.js";import"./store.Cbod9M6j.js";const ue="selectedOption",te=()=>{const s=sessionStorage.getItem(ue);return s?s.split(","):[]},Ve=s=>{const e=te();e.includes(s)||(e.push(s),sessionStorage.setItem(ue,e.join(",")))},Me=s=>{let e=te();e=e.filter(t=>t!==s),sessionStorage.setItem(ue,e.join(","))};function ve(s,e,t){const l=s.slice();return l[15]=e[t],l}function ke(s,e,t){const l=s.slice();return l[18]=e[t],l}function Pe(s){let e,t,l,c,r,o,f=s[8](s[18])+"",i,y,P,I;return{c(){e=v("li"),t=v("div"),l=v("input"),r=T(),o=v("label"),i=K(f),y=T(),this.h()},l(m){e=k(m,"LI",{});var S=E(e);t=k(S,"DIV",{class:!0});var R=E(t);l=k(R,"INPUT",{class:!0,type:!0,id:!0}),r=L(R),o=k(R,"LABEL",{class:!0,for:!0});var C=E(o);i=q(C,f),C.forEach(b),R.forEach(b),y=L(S),S.forEach(b),this.h()},h(){_(l,"class","form-check-input"),_(l,"type","checkbox"),l.value=s[18],_(l,"id",s[18]),l.checked=c=s[2].includes(s[18]),_(o,"class","form-check-label"),_(o,"for",s[18]),_(t,"class","form-check")},m(m,S){Y(m,e,S),u(e,t),u(t,l),u(t,r),u(t,o),u(o,i),u(e,y),P||(I=ee(l,"change",s[9]),P=!0)},p(m,S){S&4&&c!==(c=m[2].includes(m[18]))&&(l.checked=c)},d(m){m&&b(e),P=!1,I()}}}function Fe(s){let e,t="Error: Invalid recipie data";return{c(){e=v("div"),e.textContent=t},l(l){e=k(l,"DIV",{"data-svelte-h":!0}),ce(e)!=="svelte-p2pwgg"&&(e.textContent=t)},m(l,c){Y(l,e,c)},p:ie,i:ie,o:ie,d(l){l&&b(e)}}}function Ae(s){let e,t,l,c;return t=new je({props:{recipie:s[15]}}),{c(){e=v("div"),Le(t.$$.fragment),l=T(),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=E(e);Ne(t.$$.fragment,o),l=L(o),o.forEach(b),this.h()},h(){_(e,"class","col-md-4")},m(r,o){Y(r,e,o),De(t,e,null),u(e,l),c=!0},p(r,o){const f={};o&16&&(f.recipie=r[15]),t.$set(f)},i(r){c||(z(t.$$.fragment,r),c=!0)},o(r){G(t.$$.fragment,r),c=!1},d(r){r&&b(e),Ue(t)}}}function we(s){let e,t,l,c;const r=[Ae,Fe],o=[];function f(i,y){return i[15]&&i[15].title?0:1}return e=f(s),t=o[e]=r[e](s),{c(){t.c(),l=be()},l(i){t.l(i),l=be()},m(i,y){o[e].m(i,y),Y(i,l,y),c=!0},p(i,y){let P=e;e=f(i),e===P?o[e].p(i,y):(Ee(),G(o[P],1,1,()=>{o[P]=null}),ye(),t=o[e],t?t.p(i,y):(t=o[e]=r[e](i),t.c()),z(t,1),t.m(l.parentNode,l))},i(i){c||(z(t),c=!0)},o(i){G(t),c=!1},d(i){i&&b(l),o[e].d(i)}}}function Ke(s){let e,t,l,c=s[2].map(s[8]).join(", ")+"",r,o,f,i,y="Refresh Recipies",P,I,m,S="Add Options",R,C,H,N,p,d,O,Q,J,se,B,le,W,ne,D,ae,X,U,re,de,F=$(s[10]),w=[];for(let a=0;a<F.length;a+=1)w[a]=Pe(ke(s,F,a));let V=$(s[4]),g=[];for(let a=0;a<V.length;a+=1)g[a]=we(ve(s,V,a));const Ie=a=>G(g[a],1,1,()=>{g[a]=null});return{c(){e=v("div"),t=v("div"),l=v("h4"),r=K(c),o=T(),f=v("div"),i=v("button"),i.textContent=y,P=T(),I=v("div"),m=v("button"),m.textContent=S,R=T(),C=v("ul");for(let a=0;a<w.length;a+=1)w[a].c();H=T(),N=v("div");for(let a=0;a<g.length;a+=1)g[a].c();p=T(),d=v("div"),O=v("button"),Q=K("Previous"),se=T(),B=v("span"),le=K("Page "),W=K(s[0]),ne=T(),D=v("button"),ae=K("Next"),this.h()},l(a){e=k(a,"DIV",{class:!0});var h=E(e);t=k(h,"DIV",{class:!0});var n=E(t);l=k(n,"H4",{class:!0});var j=E(l);r=q(j,c),j.forEach(b),o=L(n),f=k(n,"DIV",{class:!0});var Z=E(f);i=k(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(i)!=="svelte-1rjp7wp"&&(i.textContent=y),P=L(Z),I=k(Z,"DIV",{class:!0});var x=E(I);m=k(x,"BUTTON",{class:!0,type:!0,id:!0,"data-bs-toggle":!0,"aria-expanded":!0,"data-svelte-h":!0}),ce(m)!=="svelte-1x6p236"&&(m.textContent=S),R=L(x),C=k(x,"UL",{class:!0,"aria-labelledby":!0});var fe=E(C);for(let M=0;M<w.length;M+=1)w[M].l(fe);fe.forEach(b),x.forEach(b),Z.forEach(b),n.forEach(b),H=L(h),N=k(h,"DIV",{class:!0});var pe=E(N);for(let M=0;M<g.length;M+=1)g[M].l(pe);pe.forEach(b),p=L(h),d=k(h,"DIV",{class:!0});var A=E(d);O=k(A,"BUTTON",{class:!0});var he=E(O);Q=q(he,"Previous"),he.forEach(b),se=L(A),B=k(A,"SPAN",{class:!0});var oe=E(B);le=q(oe,"Page "),W=q(oe,s[0]),oe.forEach(b),ne=L(A),D=k(A,"BUTTON",{class:!0});var _e=E(D);ae=q(_e,"Next"),_e.forEach(b),A.forEach(b),h.forEach(b),this.h()},h(){_(l,"class","display-4"),_(i,"class","btn btn-secondary me-2"),_(m,"class","btn btn-secondary dropdown-toggle"),_(m,"type","button"),_(m,"id","dropdownMenuButton"),_(m,"data-bs-toggle","dropdown"),_(m,"aria-expanded","false"),_(C,"class","dropdown-menu"),_(C,"aria-labelledby","dropdownMenuButton"),_(I,"class","dropdown"),_(f,"class","button-container d-flex"),_(t,"class","title-button-container"),_(N,"class","card-group row row-cols-1 row-cols-md-3 g-4"),_(O,"class","btn btn-primary"),O.disabled=J=s[0]===1,_(B,"class","page-number"),_(D,"class","btn btn-primary"),D.disabled=X=s[0]===Math.ceil(s[3].recipes.length/s[1]),_(d,"class","pagination-controls d-flex justify-content-between align-items-center mt-4"),_(e,"class","container-fluid container-background")},m(a,h){Y(a,e,h),u(e,t),u(t,l),u(l,r),u(t,o),u(t,f),u(f,i),u(f,P),u(f,I),u(I,m),u(I,R),u(I,C);for(let n=0;n<w.length;n+=1)w[n]&&w[n].m(C,null);u(e,H),u(e,N);for(let n=0;n<g.length;n+=1)g[n]&&g[n].m(N,null);u(e,p),u(e,d),u(d,O),u(O,Q),u(d,se),u(d,B),u(B,le),u(B,W),u(d,ne),u(d,D),u(D,ae),U=!0,re||(de=[ee(i,"click",s[11]),ee(O,"click",s[6]),ee(D,"click",s[7])],re=!0)},p(a,[h]){if((!U||h&4)&&c!==(c=a[2].map(a[8]).join(", ")+"")&&ge(r,c),h&1796){F=$(a[10]);let n;for(n=0;n<F.length;n+=1){const j=ke(a,F,n);w[n]?w[n].p(j,h):(w[n]=Pe(j),w[n].c(),w[n].m(C,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=F.length}if(h&16){V=$(a[4]);let n;for(n=0;n<V.length;n+=1){const j=ve(a,V,n);g[n]?(g[n].p(j,h),z(g[n],1)):(g[n]=we(j),g[n].c(),z(g[n],1),g[n].m(N,null))}for(Ee(),n=V.length;n<g.length;n+=1)Ie(n);ye()}(!U||h&1&&J!==(J=a[0]===1))&&(O.disabled=J),(!U||h&1)&&ge(W,a[0]),(!U||h&11&&X!==(X=a[0]===Math.ceil(a[3].recipes.length/a[1])))&&(D.disabled=X)},i(a){if(!U){for(let h=0;h<V.length;h+=1)z(g[h]);U=!0}},o(a){g=g.filter(Boolean);for(let h=0;h<g.length;h+=1)G(g[h]);U=!1},d(a){a&&b(e),me(w,a),me(g,a),re=!1,Re(de)}}}function qe(s,e,t){let{recipiesPerPage:l}=e,{currentPage:c}=e,r={recipes:[]},o=[],f=te();console.log(f);const i=p=>{if(p){const d=new URL(window.location);d.searchParams.set("selectedOptions",p.join(",")),window.history.pushState({},"",d)}};Te(()=>{const d=new URLSearchParams(window.location.search).get("selectedOptions");d&&t(2,f=d.split(",")),P()});const y=p=>{if(!r||!r.recipes)return[];const d=(p-1)*l,O=d+l;return r.recipes.slice(d,O)},P=async(p=!1)=>{try{const d=`allRecipies_${f.join("_")}`,O=sessionStorage.getItem(d);O&&!p?(t(3,r=JSON.parse(O)),console.log("Loaded recipes from local storage: ",r)):(t(3,r=await Be({apiKey:"fb571eb0a36b417daee401017d390f99","include-tags":f,number:"27",includeInstructions:!0})),console.log("Fetched new recipes: ",r),sessionStorage.setItem(d,JSON.stringify(r))),t(4,o=y(c))}catch(d){console.error("Failed to fetch recipes:",d),t(3,r={recipes:[]})}},I=p=>{t(4,o=y(p)),t(0,c=p)},m=()=>{c>1&&I(c-1)},S=()=>{c<Math.ceil(r.recipes.length/l)&&I(c+1)},R=p=>p.charAt(0).toUpperCase()+p.slice(1),C=p=>{const d=p.target.value;p.target.checked?Ve(d):Me(d),t(2,f=te()),P(!0)},H=["vegetarian","vegan","pescatarian","gluten free","dairy free","breakfast","lunch","dinner","dessert","drinks"],N=()=>P(!0);return s.$$set=p=>{"recipiesPerPage"in p&&t(1,l=p.recipiesPerPage),"currentPage"in p&&t(0,c=p.currentPage)},s.$$.update=()=>{s.$$.dirty&4&&i(f)},P(!0),[c,l,f,r,o,P,m,S,R,C,H,N]}class Ye extends Oe{constructor(e){super(),Ce(this,e,qe,Ke,Se,{recipiesPerPage:1,currentPage:0})}}export{Ye as default};
